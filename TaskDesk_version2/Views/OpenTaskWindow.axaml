<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:TaskDesk_version2.ViewModels"
        x:Class="TaskDesk_version2.Views.OpenTaskWindow"
        x:DataType="vm:OpenTaskWindowViewModel"
        CanResize="False"
        CanMaximize="False"
        Title="Task"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner">
        
        <Grid Margin="10">
                
                <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" MinWidth="200"/>
                        <ColumnDefinition Width="Auto" MinWidth="50"/>
                        <ColumnDefinition Width="Auto" MinWidth="200"/>
                        <ColumnDefinition Width="*" MinWidth="200"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" MaxWidth="200">
                        <TextBlock Text="Title:" FontSize="18" Margin="5" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Title}" FontSize="18" Margin="5" HorizontalAlignment="Right" MaxWidth="140" Width="140"/>
                </StackPanel>
                
                <TextBlock Name="IdBlock" Grid.Row="0" Grid.Column="1" FontSize="18" Margin="5" VerticalAlignment="Center"/>
                
                <StackPanel Grid.Row="0" Grid.Column="2" Orientation="Horizontal">
                        <TextBlock Text="Due Date:" FontSize="18" Margin="5" VerticalAlignment="Center"/>
                        <DatePicker SelectedDate="{Binding DueDate}" Margin="5"/>
                </StackPanel>
                
                <StackPanel Grid.Row="0" Grid.Column="3" Orientation="Horizontal" MaxWidth="200">
                        <TextBlock Text="State:" FontSize="18" VerticalAlignment="Center" Margin="5"/>
                        <ComboBox Name="StateCombo" SelectedItem="{Binding State}" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="5"/>
                </StackPanel>
                
                <ScrollViewer Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" VerticalScrollBarVisibility="Auto" Margin="5" MaxWidth="700">
                        <TextBox Classes="TaskDescriptionBox" Text="{Binding Description}"/>
                </ScrollViewer>
                
                <StackPanel Grid.Row="1" Grid.Column="3" Width="200">
                        
                        <TextBlock Text="Assigned Users:" FontWeight="Bold" Margin="0,0,0,5" Padding="5"/>
                        <ScrollViewer Height="150" VerticalScrollBarVisibility="Auto">
                                <ListBox SelectionMode="Multiple, Toggle" SelectedItems="{Binding AssignedUsers}" ItemsSource="{Binding AllUsers}">
                                        <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                        <TextBlock Text="{Binding FullName}"/>
                                                </DataTemplate>
                                        </ListBox.ItemTemplate>
                                </ListBox>
                        </ScrollViewer>
                        
                        <Border BorderThickness="1" Margin="0,10,0,10"/>
                        
                        <TextBlock Text="Assigned Groups:" FontWeight="Bold" Margin="0,0,0,5" Padding="5"/>
                        <ScrollViewer Height="150" VerticalScrollBarVisibility="Auto">
                                <ListBox SelectionMode="Multiple, Toggle" SelectedItems="{Binding AssignedGroups}" ItemsSource="{Binding AllGroups}">
                                        <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                        <TextBlock Text="{Binding Name}"/>
                                                </DataTemplate>
                                        </ListBox.ItemTemplate>
                                </ListBox>
                        </ScrollViewer>
                        
                </StackPanel>
                
                <StackPanel Grid.Row="2" Grid.Column="2" Orientation="Horizontal">
                        <Button Content="Save" Width="80" HorizontalAlignment="Right" IsDefault="True"  Command="{Binding SaveTaskCommand}"/>
                        <Button Content="Close" Width="80" HorizontalAlignment="Right" Command="{Binding CloseCommand}"/>
                </StackPanel>
                
        </Grid>
        
</Window>